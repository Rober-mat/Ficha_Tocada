<!DOCTYPE html> 
<html lang="es"> 
 <head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>UNGS/IDH - Ficha Tocada / Ficha Movida</title> 
    <link rel="icon" href="logo_ungs_512.png" type="image/png">
    <link rel="stylesheet" href="styles.css"> <!-- Enlace al CSS -->
</head>
  <body> 
    <div id="info"> 
      <h2> UNGS / IDH </h2> 
      <p> Universidad Nacional de General Sarmiento </p> 
      <p> Instituto del Desarrollo Humano </p> 
      <p> Proyecto: Desalambrando la Matemática Elemental </p> 
    </div> 
    <h1>Ficha Tocada / Ficha Movida</h1> 
    <div id="reglas"> 
      <button onclick="cerrarReglas()">✖</button> 
      <h2>Reglas del Juego</h2> 
      <p>Cada jugador, por turno, desplaza la ficha un casillero hacia la meta: derecha, arriba o diagonal noreste.</p> 
      <p>Gana el jugador que apoye la ficha en la meta: el cuadrado de la esquina superior derecha.</p> 
    </div> 
    <div> 
      <label for="tamano">Tamaño del tablero:</label> 
      <input type="number" id="tamano" min="3" max="10" value="5"> 
      <button onclick="cambiarTamano()">Cambiar Tamaño</button> 
    </div> 
    <div> 
      <label for="colorFicha1">Color Ficha 1:</label> 
      <input type="color" id="colorFicha1" value="#722281"> 
      <label for="colorFicha2">Color Ficha 2:</label> 
      <input type="color" id="colorFicha2" value="#00837B"> 
      <button onclick="cambiarColores()">Aplicar Colores</button> 
    </div> 
    <div id="imagen-contenedor"> 
      <img id="imagen" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQy53C7GUOVya_l8CRwcRCCrPpwTtitzdlaZQ&s" alt="Descripción de la imagen"> 
    </div> 
    <div id="tablero"> 
    </div> 
    
    <button onclick="reiniciar()">Reiniciar</button> 
    <div id="creditos">
      Código creado por Félix Ben
    </div> 
    
    <script> 
      let tamaño = 5; 
      let fila = tamaño - 1; 
      let col = 0; 
      let colorFicha1 = '#722281'; 
      let colorFicha2 = '#00837B'; 
      let esVerde = true; 
      const tablero = document.getElementById('tablero'); 
      const inputTamano = document.getElementById('tamano'); 
      const inputColorFicha1 = document.getElementById('colorFicha1'); 
      const inputColorFicha2 = document.getElementById('colorFicha2'); 
      function inicializarTablero() { 
        tablero.innerHTML = ''; 
        tablero.style.gridTemplateColumns = `repeat(${tamaño}, 1fr)`; 
        tablero.style.gridTemplateRows = `repeat(${tamaño}, 1fr)`; 
        for (let f = 0; f < tamaño; f++) { 
          for (let c = 0; c < tamaño; c++) { 
            const celda = document.createElement('div'); 
            celda.className = 'celda'; 
            celda.onclick = () => moverFicha(f, c); 
            if (f === fila && c === col) { 
              const ficha = document.createElement('div'); 
              ficha.className = 'ficha ' + (esVerde ? 'ficha-verde' : 'ficha-rojo'); 
              ficha.style.backgroundColor = esVerde ? colorFicha1 : colorFicha2; celda.appendChild(ficha); 
            } 
            tablero.appendChild(celda); 
          } 
        } 
      } 
      function moverFicha(f, c) {
        if ((f === fila - 1 && c === col) || (f === fila && c === col + 1) || (f === fila - 1 && c === col + 1)) {
          fila = f; col = c; esVerde = !esVerde; 
          actualizarTablero(); 
          comprobarVictoria(); 
        } 
      } 
      function actualizarTablero() { 
        inicializarTablero(); 
      } 
      function comprobarVictoria() { 
        if (fila === 0 && col === tamaño - 1) { 
          setTimeout(() => { 
            const mensaje = document.createElement('div'); 
            mensaje.className = 'mensaje-victoria'; 
            mensaje.innerHTML = '<h2>¡Felicidades!</h2><p>¡Has ganado el juego!</p>'; 
            document.body.appendChild(mensaje); 
            setTimeout(() => { 
              mensaje.style.opacity = 0; 
              setTimeout(() => { 
                document.body.removeChild(mensaje); 
                reiniciar(); 
              }, 500); 
            }, 2000); 
          }, 100); 
        } 
      } 
      function reiniciar() { 
        fila = tamaño - 1; 
        col = 0; 
        esVerde = true; 
        actualizarTablero(); 
      } 
      function cambiarTamano() { 
        tamaño = parseInt(inputTamano.value, 10); 
        if (isNaN(tamaño) || tamaño < 3) 
          tamaño = 3; 
        fila = tamaño - 1; 
        col = 0; 
        actualizarTablero(); 
      } 
      function cambiarColores() { 
        colorFicha1 = inputColorFicha1.value; 
        colorFicha2 = inputColorFicha2.value; 
        actualizarTablero(); 
      } 
      function cerrarReglas() { 
        document.getElementById('reglas').style.display = 'none'; 
      } 
      inicializarTablero(); 
    </script> 
  </body> 
</html>
